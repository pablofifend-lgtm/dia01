<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <div>
        <input type="text" id="input1" placeholder="introduce nÂº id de usuario">
        <button id="boton">buscar</button>
        <p id="result">
        <h1 id="usuario"></h1>
        <ul id="ul-al">
            <h2 id="albums"></h2>
        </ul>
        </p>
    </div>
    <script>

        //capturar los id del div para aplicarles las funciones
        let boton = document.getElementById("boton");
        let input1 = document.getElementById("input1")
        let h1 = document.getElementById("usuario");
        let h2 = document.getElementById("albums");
        let p = document.getElementById("result");
        let ul = document.getElementById("ul-al");

        async function obtenerUsu() {
            try {
                //crear la variable repsuesta donde te devuelve la respuesta de la api que coge la url de la api
                //$ sirve para concatenar strings en js
                const response = await fetch(`https://jsonplaceholder.typicode.com/users/${input1.value}`)

                //ok es un metodo para que te devuelva si esta bien o no (200)
                if (!response.ok) {
                    //si la respuesta no es valida que haga esto
                    throw new Error("Ponlo bien", response.status);
                }

                //respuesta transformando en json
                const data = await response.json();
                console.log(data)

                //la variable h1, le damos contenido de tipo texto
                //a ese h1 le decimos que sea igual a la variable data
                //a data lo ponemos para que coja el valor name que esta dentro del json
                //concatenamos el nombre con la ciudad
                //con el $ sirve para concatenar de forma dinamica
                //para sacar city, accedemos en data dentro address y despues city
                //es igual a data/address/city
                h1.textContent = data.name + ` ( ${data.address.city} ) `;

            } catch (error) {

            }
        }

        async function albumL() {

            try {
                const r2 = await fetch(`https://jsonplaceholder.typicode.com/albums?userId=${input1.value}`)
                if (!r2.ok) {
                    //si la respuesta no es valida que haga esto
                    throw new Error("Sorry", r2.status);
                }

                //transformar en json
                const data = await r2.json()
                console.log(data)

                data.forEach(element => {
                    ul.innerHTML += `<li> ${element.title} </li>`;
                });

            } catch (error) {

            }

        }
        //boton.addEventListener("click",obtenerUsu()) 

        boton.addEventListener("click", () => { 
            h1.textContent = "";
            h2.textContent = "";
            ul.innerHTML = "";
            obtenerUsu(), albumL()
        })


    </script>
</body>

</html>